<div class="modal fade" id="clienteModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

        <div class="modal-header">
            <h5 class="modal-title">Add Cliente</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
            <form id="clienteForm">
                {% csrf_token %}
                {{ form_cliente.as_p }}
                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>
        </div>

    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
$(document).on("submit", "#clienteForm", function(e){
    e.preventDefault();

    $.ajax({
        url: "/add_cliente/",
        method: "POST",
        data: $(this).serialize(),
        success: function(response){ 
            $("#clienteModal").modal("hide");
 
            $("#cpfInput").val(response.cpf); 

            window.location.href = response.redirect_url;
        },
        error: function(xhr){
            alert("Erro: " + xhr.responseJSON.errors);
        }
    });
});
</script>